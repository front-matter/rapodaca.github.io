---
title: "Anatomy of a Cheminformatics Web Application: InChIMatic"
published: "2006-12-15T00:00:00.000Z"
---

<a href="http://www.iupac.org/inchi/">InChI</a> is an open molecular identifier system. Although InChIs obviate the need for a central registration authority, they are complex enough that they must be generated by computer. Currently, a few desktop molecular editors can generate InChI identifiers. But wouldn't it be more convenient if this capability existed in a simple Web application that could be used from any computer - anywhere? This article describes a Web application called "InChIMatic", which does just that.

In this article, I'll show how <a href="http://www.molinspiration.com/jme/">Java Molecular Editor</a> (JME), a lightweight 2-D structure editor, can be extended to produce InChI identifiers through <em>server-side</em> software written in Ruby, rather than by extending the applet with Java code.

# Downloads and Prerequisites

InChIMatic requires <a href="http://rubyonrails.org">Ruby on Rails</a> and the <a href="http://depth-first.com/articles/2006/08/17/ruby-and-inchi-the-rino-library">Rino InChI toolkit</a>. Both of these libraries can be installed using the <a href="http://rubygems.org/">RubyGems</a> packaging system.

The <a href="http://rubyforge.org/frs/download.php/15616/inchimatic-0.0.2.tar.gz">complete InChIMatic source package</a> can be downloaded from RubyForge. For convenience, a copy of JME is included with the distribution. The author, Peter Ertl, has kindly given permission for the bundled JME applet to be used with InChIMatic. For other uses, consult the <a href="http://www.molinspiration.com/jme/">JME homepage</a>.

# Running InChIMatic

```bash
cd inchimatic-0.0.2
ruby script/server
```

Pointing your browser to <a href="http://localhost:3000/inchi/input">http://localhost:3000/inchi/input</a>, drawing a structure in the JME window, and pressing the "InChI!" button will produce the corresponding InChI in the area below.

![InChIMatic](/images/posts/20061214/screenshot_1.png "InChIMatic")

# Behind the Scenes

The JME applet itself provides no capabilities for generating InChI identifiers. This functionality is instead provided by the Rails server via the Rino InChI library.

Let's say Susan wants to get the InChI for 3,4-dichlorophenol. After entering the structure into the JME window, she presses the "InChI!" button. This sets in motion the following sequence of events:


- The JavaScript function `writeMolfile` is called. This retrieves a molfile representation of 3,4-dichlorophenol from JME, which is then written to to the hidden field `molfile`.
- A Rails listener notices that the hidden text field has been updated and so invokes the InChIMatic `ajax_inchi` action. This is a Rails Ajax action that will update only a portion of the InChIMatic window. For more detail on this Rails Ajax technique, see <a href="http://depth-first.com/articles/2006/12/04/anatomy-of-a-cheminformatics-web-application-ajaxifying-depict">the previous Anatomy of a Cheminformatics Web Application</a> article.
- The `ajax_inchi` action retrieves the contents of the hidden `molfile` field. This molfile is then used to generate an InChI using Rino. This InChI is then saved to the instance variable `inchi`.
- The contents of the InChIMatic area partitioned by the `results` `div` are then updated with the InChI obtained in Step 3. The JME applet itself is unaffected by this operation, allowing Susan to further elaborate her molecule, if she'd like.

# So What? Re-Thinking the Role of Applets

JME is, by itself, incapable of generating InChIs. Yet InChIMatic provides this capability as if it existed natively. In other words, a lightweight, fast-loading, and responsive 2-D editor can be extended <em>on the server side</em>, rather than on the client side. The difference is imperceptible to the user, but ripe with potential for the developer.

One of the most common, and completely valid, complaints about Java applets is that they take too long to load. Offloading some of the functionality currently being bundled in applets onto a Web server offers one way to combat the problem. Furthermore, combining Java applets with Ajax and powerful Web application frameworks like Ruby on Rails offers virtually limitless opportunities to re-think the role of Java applets in Web application development.

# Conclusions

JME's strength comes, perhaps ironically, from its limited functionality. By using some simple Web programming techniques, JME can be extended with server-side programming. The advantages, compared to extending the JME applet itself with Java on the client side, are significant. Future articles in this series will explore some of the possibilities.